/*!
 * form-builder - Form builder library v0.0.1
 * Copyright (c) 2018-2021 TSV  - http://github.com/tsv2013/form-builder
 * License: MIT (http://www.opensource.org/licenses/mit-license.php)
 */
!function(e,t){"object"==typeof exports&&"object"==typeof module?module.exports=t(require("knockout")):"function"==typeof define&&define.amd?define("Uiml",["knockout"],t):"object"==typeof exports?exports.Uiml=t(require("knockout")):e.Uiml=t(e.ko)}(window,(function(e){return function(e){var t={};function n(r){if(t[r])return t[r].exports;var i=t[r]={i:r,l:!1,exports:{}};return e[r].call(i.exports,i,i.exports,n),i.l=!0,i.exports}return n.m=e,n.c=t,n.d=function(e,t,r){n.o(e,t)||Object.defineProperty(e,t,{enumerable:!0,get:r})},n.r=function(e){"undefined"!=typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(e,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(e,"__esModule",{value:!0})},n.t=function(e,t){if(1&t&&(e=n(e)),8&t)return e;if(4&t&&"object"==typeof e&&e&&e.__esModule)return e;var r=Object.create(null);if(n.r(r),Object.defineProperty(r,"default",{enumerable:!0,value:e}),2&t&&"string"!=typeof e)for(var i in e)n.d(r,i,function(t){return e[t]}.bind(null,i));return r},n.n=function(e){var t=e&&e.__esModule?function(){return e.default}:function(){return e};return n.d(t,"a",t),t},n.o=function(e,t){return Object.prototype.hasOwnProperty.call(e,t)},n.p="",n(n.s=7)}([function(t,n){t.exports=e},,,function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.htmlUiRendererPeers=void 0,t.htmlUiRendererPeers=[{peername:"presentation",id:"HTMLUIRenderer",dclasses:[{id:"container",mapsto:"ContainerRenderer"},{id:"input",mapsto:"InputRenderer"},{id:"label",mapsto:"LabelRenderer"}],wloaders:{}}]},,function(e,t,n){"use strict";function r(e){return!!e&&e.length>2&&"["===e[e.length-2]&&"]"===e[e.length-1]}Object.defineProperty(t,"__esModule",{value:!0}),t.getArrayElementType=t.isArrayType=t.isSimpleType=t.getObjectDescription=t.domain=void 0,t.domain={},t.domain.part={name:"part",properties:[{name:"partclass"},{name:"parts",type:"part[]"},{name:"cssClasses"}]},t.domain.panel={name:"panel",properties:[{name:"text"},{name:"parts",type:"part[]"},{name:"cssClasses"}]},t.domain.layoutItem={name:"layoutItem",properties:[{name:"parts",type:"part[]"},{name:"cssClasses"}]},t.domain.container={name:"container",properties:[{name:"parts",type:"part[]"},{name:"cssClasses"}]},t.domain.label={name:"label",properties:[{name:"cssClasses"}]},t.domain.input={name:"input",properties:[{name:"cssClasses"}]},t.domain.layout={name:"layout",properties:[{name:"parts",type:"part[]"},{name:"cssClasses"}]},t.domain.layoutRow={name:"layoutRow",properties:[{name:"parts",type:"part[]"},{name:"cssClasses"}]},t.domain.layoutColumn={name:"input",properties:[{name:"parts",type:"part[]"},{name:"cssClasses"}]},t.getObjectDescription=function(e){return t.domain[e]},t.isSimpleType=function(e){return!!e&&!t.domain[e]&&-1==e.indexOf("[]")},t.isArrayType=r,t.getArrayElementType=function(e){if(r(e))return e.substring(0,e.length-2)}},,function(e,t,n){"use strict";var r=this&&this.__createBinding||(Object.create?function(e,t,n,r){void 0===r&&(r=n),Object.defineProperty(e,r,{enumerable:!0,get:function(){return t[n]}})}:function(e,t,n,r){void 0===r&&(r=n),e[r]=t[n]}),i=this&&this.__exportStar||function(e,t){for(var n in e)"default"===n||Object.prototype.hasOwnProperty.call(t,n)||r(t,e,n)};Object.defineProperty(t,"__esModule",{value:!0}),t.refresh=t.render=void 0;var s=n(3),o=n(24);i(n(3),t),i(n(11),t),i(n(25),t),i(n(28),t),i(n(31),t),i(n(34),t),i(n(37),t),i(n(38),t),i(n(41),t);var a=new o.UIMLWrapper("undefined"!=typeof config&&config||{uimlinterface:{},peers:s.htmlUiRendererPeers});t.render=function(e,t){return a.createRenderer(e).render(t)},t.refresh=function(){a.refresh()}},,,,function(e,t,n){"use strict";var r,i=this&&this.__extends||(r=function(e,t){return(r=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var n in t)Object.prototype.hasOwnProperty.call(t,n)&&(e[n]=t[n])})(e,t)},function(e,t){function n(){this.constructor=e}r(e,t),e.prototype=null===t?Object.create(t):(n.prototype=t.prototype,new n)});Object.defineProperty(t,"__esModule",{value:!0}),t.InputRenderer=t.LabelRenderer=t.ContainerRenderer=t.ComponentRenderer=t.InterfaceRenderer=void 0;var s=n(0),o=n(3);function a(e){var t=document.createElement("div");return t.innerHTML=e,1===t.children.length?t.children[0]:t}var l=function(){function e(e,t){var n=this;this.renderers=[],this.part=e,this.styles=t.getStyles(e),(e.parts||[]).forEach((function(e){n.renderers.push(t.createRenderer(e))}))}return e.prototype.getCustomProcessedStyles=function(){return["cssClasses","text","data"]},e.prototype.applyStyles=function(e,t){var n=this;Object.keys(this.styles).forEach((function(e){var r=e,i=n.styles[e];-1===n.getCustomProcessedStyles().indexOf(r)&&t.css(r,i)})),Object.keys(this.styles.cssClasses).map((function(e){return n.styles.cssClasses[e]})).forEach((function(e){t.className+=" "+e}));var r=this.getProperty("text");r&&0===t.children.length&&(t.innerText=r);var i=this.getProperty("html");i&&0===t.children.length&&(t.innerHTML=i)},e.prototype.getProperty=function(e){return void 0!==this.part[e]?this.part[e]:this.styles[e]},e.prototype.renderChildren=function(e){this.renderers.forEach((function(t){t.render(e)}))},e.prototype.getRenderResult=function(){return a("<div/>")},e.prototype.render=function(e){void 0===e&&(e=null);var t=this.getRenderResult(),n=this.getProperty("dataBind");void 0!==n&&(t.dataset.bind=Object.keys(n).map((function(e){return e+": "+n[e]})).join(", ")),this.applyStyles(this.part,t),this.renderChildren(t);var r=this.getProperty("hint");return r&&(t.title=r),e&&e.append(t),t},e}();t.InterfaceRenderer=l;var c=function(e){function t(t,n){return e.call(this,t,n)||this}return i(t,e),t.prototype.render=function(e){var n,r=((t.componentPrefix?t.componentPrefix+"-":"")+this.part.partclass).toLowerCase(),i=JSON.stringify(this.part).split('"').join("'");return n=s.components.isRegistered(r)?a("<"+r+' params="{ model: $data, context: $context, options: '+i+'}"/>'):"function"==typeof o.htmlUiRendererPeers[0].wloaders[r]?a("<div data-bind=\"lazyWidget: { name: '"+r+"', options: "+i+' }"/>'):a("<component-stub params=\"{ message: 'Error: Component "+r+" is not installed.'}\"/>"),this.applyStyles(this.part,n),e.append(n),n},t.componentPrefix="",t}(l);t.ComponentRenderer=c,s.components.register("component-stub",{viewModel:{createViewModel:function(e,t){return{message:e.message}}},template:"<div data-bind='text: message'></div>"});var d=function(e){function t(t,n){return e.call(this,t,n)||this}return i(t,e),t.prototype.getRenderResult=function(){var e=[],t=this.getProperty("visible");t&&e.push("visible: "+t);var n=this.getProperty("css");return n&&e.push("css: "+n),a("<div data-bind='"+e.join(", ")+"'/>")},t}(l);t.ContainerRenderer=d;var p=function(e){function t(t,n){return e.call(this,t,n)||this}return i(t,e),t.prototype.getRenderResult=function(){return a("<label>"+this.getProperty("data")+"</label>")},t}(l);t.LabelRenderer=p;var u=function(e){function t(t,n){return e.call(this,t,n)||this}return i(t,e),t.prototype.getRenderResult=function(){return a('<input class="input-control" placeholder="'+(this.getProperty("pleceholderText")||"")+'" data-bind="value: $data.'+this.getProperty("data")+", valueUpdate: 'keyup'\""+(this.getProperty("readonly")?" disabled":"")+(this.getProperty("hint")?' title="'+this.getProperty("hint")+'"':"")+(this.getProperty("pattern")?' pattern="'+this.getProperty("pattern")+'"':"")+(!1===this.getProperty("isnullable")?" required":"")+">")},t}(l);t.InputRenderer=u},,,,,,,,,,,,,function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.UIMLWrapper=void 0;var r=n(11),i=function(){function e(e){this._uiml=e,this._renderersMap={},this.refresh()}return e.prototype._getTypeConstructor=function(e){var t=r[e];return"function"==typeof t?t:r.InterfaceRenderer},e.prototype.refresh=function(){var e=this,t=null;if(this._uiml.peers.forEach((function(e){"presentation"===e.peername&&"HTMLUIRenderer"===e.id&&(t=e)})),!t)throw new Error("HTMLUIRenderer presentation not found.");t.dclasses.forEach((function(t){e._renderersMap[t.id]=e._getTypeConstructor(t.mapsto)}))},e.prototype.getStyles=function(e){var t={cssClasses:[]};return e&&((this._uiml.uimlinterface.styles||[]).forEach((function(n){n.partclass!==e.partclass&&n.partname!==e.id||("cssClass"!==n.name?t[n.name]=n.value:t.cssClasses.push(n.value))})),(e.cssClasses||"").split(" ").forEach((function(e){t.cssClasses.push(e)}))),t},e.prototype.createRenderer=function(e){return new(this._renderersMap[e.partclass]||r.ComponentRenderer)(e,this)},e}();t.UIMLWrapper=i},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.PanelWidgetViewModel=void 0;var r=n(0),i=n(7);n(26);var s=n(27),o=function(){function e(e,t){var n=this;this._subscriptions=[],this.collapsed=r.observable(!0),this.ready=r.observable(!1),this.text="",this.cssClasses="",this.$parent=t.$parent&&t.$parent.data;var i=e.visibleIndex;i&&(this.visible=t.$parent.visible[i],this._subscriptions.push(r.computed((function(){var e=r.unwrap(n.visible);n.collapsed(!e),e&&n.ready(!0)})))),this.collapsed(!e.expanded),this.ready(!!e.expanded),this.text=e.text,this.cssClasses=e.cssClasses}return e.prototype.dispose=function(){this._subscriptions.forEach((function(e){return e.dispose()})),this._subscriptions.splice(0,this._subscriptions.length),this.visible=void 0},e}();t.PanelWidgetViewModel=o,r.components.register("panel",{viewModel:{createViewModel:function(e,t){var n=new o(e.options,e.context),s=function(){var n=[],r=t.element.getElementsByClassName("panel__content")[0];return r.innerHTML="",(e.options.parts||[]).forEach((function(e){var t=i.render(e,r);r.appendChild(t),n.push(t)})),n};if(n.ready())s();else var a=n.ready.subscribe((function(){setTimeout((function(){var t=s();if(t.length>0){var n=e.context.createChildContext(e.model);r.applyBindings(n,t[0])}}),1),a.dispose()}));return r.utils.domNodeDisposal.addDisposeCallback(t.element,(function(){n.dispose()})),n}},template:s}),i.htmlUiRendererPeers[0].dclasses.push({id:"panel",mapsto:"ComponentRenderer"})},function(e,t){},function(e,t){e.exports="<div class='panel' data-bind=\"visible: !$data.visible || $data.visible(), css: cssClasses\">\r\n    <div class='panel__header'\r\n        data-bind=\"click: function () { collapsed(!collapsed()); ready(true); }, css: { 'panel__header--collapsed': collapsed }\">\r\n        \x3c!-- ko if: !!$data.visible --\x3e\r\n        <span class='panel__header-close-icon' data-bind=\"click: function () { visible(false); }\">&#10060;</span>\r\n        \x3c!-- /ko --\x3e\r\n        <div class=\"panel__header-group\">\r\n            <span class='panel__header-caption' data-bind=\"text: text || 'Panel title'\"></span>\r\n            <span class='panel__header-collapser' data-bind=\"text: (collapsed() ? '&#709;' : '&#708;')\"></span>\r\n        </div>\r\n    </div>\r\n    <div class='panel__body' data-bind=\"css: { 'panel__body--hidden': collapsed }\">\r\n        <div class=\"panel__content\" data-bind=\"visible: !collapsed(), with: $parent\">\r\n        </div>\r\n    </div>\r\n</div>"},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.LayoutViewModel=void 0;var r=n(0),i=n(3);n(29);var s=n(30),o=function(){};t.LayoutViewModel=o,r.components.register("layout",{viewModel:{createViewModel:function(e,t){var n=e.context.$parents[2].elements()[0];return{formElement:n,elements:r.computed((function(){return n.elements()}))}}},template:s}),i.htmlUiRendererPeers[0].dclasses.push({id:"layout",mapsto:"ComponentRenderer"})},function(e,t){},function(e,t){e.exports='\x3c!-- ko foreach: elements --\x3e\r\n<layout-item params="element: $data" data-bind="style: {  }"></layout-item>\r\n\x3c!-- /ko --\x3e\r\n\x3c!-- ko if: elements().length === 0 --\x3e\r\n<placeholder-item params="element: formElement"></placeholder-item>\r\n\x3c!-- /ko --\x3e\r\n'},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.ObjectWidgetViewModel=void 0;var r=n(0),i=n(5);n(32);var s=n(33);function o(e){var t=e.type||"string",n=[];return i.isArrayType(t)?n.push({partclass:"collection-editor",cssClasses:"test-input",data:e.name,elementType:e.type}):(n.push({partclass:"label",cssClasses:"test-label",data:e.title||e.name}),n.push({partclass:"input",cssClasses:"test-input",data:e.name})),{partclass:"layoutItem",cssClasses:"item test-item test-group",parts:n}}var a=function(){function e(e,t){var n=this;void 0===e&&(e={}),this.context=t,this.layoutUiml={partclass:"layoutColumn",cssClasses:"column",parts:[]},this.layoutUiml.parts.push(o({name:"data"}));var r=i.getObjectDescription(t.partclass);r&&r.properties.forEach((function(e){n.layoutUiml.parts.push(o(e))}))}return e.prototype.dispose=function(){},e}();t.ObjectWidgetViewModel=a,r.components.register("object-editor",{viewModel:{createViewModel:function(e,t){return new a(e.options,e.context)}},template:s})},function(e,t){},function(e,t){e.exports='<div class=\'object\' data-bind="">\r\n    <layout-item params="uiml: layoutUiml, context: context" data-bind="style: {  }"></layout-item>\r\n</div>'},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.CollectionWidgetViewModel=void 0;var r=n(0),i=n(7);n(35);var s=n(36),o=function(){function e(e,t){var n=this;this.options=e,this.context=t,this.collapsed=r.observable(!0),this.items=r.observableArray(),this.addAction={title:"+ Add",items:[]},this.remove=function(e){n.items.remove(e)},this.model=t.$data;var i=this.model[e.data]||[];this.items(i),this._itemsSubscription=this.items.subscribe((function(e){return n.model[n.options.data]=e}));["label","input","panel"].forEach((function(e){n.addAction.items.push({title:e,action:function(){return n.add(e)}})}))}return Object.defineProperty(e.prototype,"title",{get:function(){return(this.collapsed()?">":"v")+" "+this.options.data+" ("+this.items().length+")"},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"elementType",{get:function(){return this.options.elementType},enumerable:!1,configurable:!0}),e.prototype.add=function(e){this.items.push(this.model.create(e))},e.prototype.dispose=function(){this._itemsSubscription.dispose()},e}();t.CollectionWidgetViewModel=o,r.components.register("collection-editor",{viewModel:{createViewModel:function(e,t){return new o(e.options,e.context)}},template:s}),i.htmlUiRendererPeers[0].dclasses.push({id:"collection-editor",mapsto:"ComponentRenderer"})},function(e,t){},function(e,t){e.exports='<div class=\'collection\' data-bind="">\r\n    <div class="collection__header"\r\n        data-bind="click: function () { collapsed(!collapsed()); }, css: { \'collection__header--collapsed\': collapsed }">\r\n        <span data-bind="text: title"></span>\r\n    </div>\r\n    <div class="collection__content" data-bind="css: { \'collection__content--hidden\': collapsed }">\r\n        <div class="collection__item-menu">\r\n            <ui-dropdown-button params="item: addAction"></ui-dropdown-button>\r\n        </div>\r\n        \x3c!-- ko foreach: items --\x3e\r\n        <div class="collection__item">\r\n            <object-editor params="context: $data, type: $parent.elementType"></object-editor>\r\n            <div class="collection__item-menu">\r\n                <div class="bf-item-menu__button" data-bind="click: function() { $parent.remove($data); }">- Remove</div>\r\n            </div>\r\n        </div>\r\n        \x3c!-- /ko --\x3e\r\n    </div>\r\n</div>'},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0})},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var r=n(0);n(39);var i=n(40);r.components.register("ui-button",{viewModel:{createViewModel:function(e,t){return e.item}},template:i})},function(e,t){},function(e,t){e.exports='<div class="bf-item-menu__item bf-item-menu__button" data-bind="text: title, click: action, clickBubble: false, visible: !$data.visible || $data.visible()">\r\n</div>\r\n'},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.DropdownButton=void 0;var r=n(0);n(42);var i=n(43),s=function(){function e(e,t){var n=this;this._item=e,this._hide=t,this.click=function(e,t){setTimeout((function(){n._hide()})),e.action()}}return Object.defineProperty(e.prototype,"title",{get:function(){return this._item.title},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"visible",{get:function(){return this.items.length>0&&(!this._item.visible||r.unwrap(this._item.visible))},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"items",{get:function(){return this._item.items||[]},enumerable:!1,configurable:!0}),e}();t.DropdownButton=s,r.components.register("ui-dropdown-button",{viewModel:{createViewModel:function(e,t){return new s(e.item,(function(){t.element.children[0].blur()}))}},template:i})},function(e,t){},function(e,t){e.exports='<div class="bf-item-menu__dropdown-container" tabindex="-1">\r\n    <div class="bf-item-menu__dropdown" data-bind="text: title, clickBubble: false, visible: visible">\r\n    </div>\r\n    <div class="bf-item-menu__dropdown-items" data-bind="visible: visible">\r\n        \x3c!-- ko foreach: items --\x3e\r\n        <div class="bf-item-menu__dropdown-item" data-bind="text: title, click: $parent.click, clickBubble: false, visible: !$data.visible || $data.visible()">\r\n        </div>\r\n        \x3c!-- /ko --\x3e\r\n    </div>\r\n</div>\r\n'}])}));